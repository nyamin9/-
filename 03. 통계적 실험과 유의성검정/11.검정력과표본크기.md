# 🎰 11. 검정력과 표본크기  

🎲 용어 정리  

- 효과크기 (effect size) : ‘클릭률의 20% 향상’과 같이 통계 검정을 통해 판단할 수 있는 효과의 최소 크기  
   
- 검정력 (power) : 주어진 표본크기로 주어진 효과크기를 알아낼 확률  
   
- 유의수준 (significance level) : 검증 시 사용할 통계 유의수준  
 
<br>  

🎲 표본크기에 대한 고려는 ‘가설검정이 실제로 처리 A와 B의 차이를 밝혀낼 수 있을까?’라는 질문과 연결됨  

🎲 A와 B 사이의 차이가 작으면 작을수록 그 구분을 위해서는 더 많은 표본 크기가 필요하기 때문임  

<br>  

🎲 검정력이란 바로 특정 표본 조건에서 특정한 효과크기를 알아낼 수 있는 확률을 의미함  

🎲 예를 들어 25 타석에서 0.330 타자와 0.200 타자를 구분할 확률이 0.75 일때, 효과크기란 둘 간의 타율 차이인 0.130을 의미함  

🎲 또한 가설 검정을 통해 둘 간에 차이가 없을 것이라는 귀무가설을 기각하고 어떤 처리에 의한 효과가 있다고 결론을 내릴 수 있음  

🎲 즉, 두 타자를 대상으로 한 25타석 동안의 실험은 0.130 의 효과크기에 대해 0.75 만큼의 검정력을 가진다는 의미임  

<br>  

🎲 하지만 가설검정에는 표본의 변이나 쿠기, 효과크기, 유의수준 등을 특정하는 등 몇 가지 유동적인 부분이 존재함  

🎲 따라서 직관적인 방법을 통해 데이터를 수집하고 결론을 내릴 수 있음  

1. 사전 정보를 이용해 결과 데이터가 비슷하게 나올 수 있는 가상의 데이터를 생성함. 2할 타자의 경우 20개의 1과 80개의 0이 들어 있는 상자를 만듦  
2. 첫 표본에서 원하는 효과크기를 더해 두번째 표본을 생성함. 33개의 1과 67개의 0을 통해 3할3푼 타자의 상자를 만듦  
3. 각 상자에서 크기가 n인 부트스트랩 표본을 추출  
4. 두 부트스트랩 표본에 대해서 순열 가설검정을 진행하여 여기에 통계적으로 유의미한 차이가 있는지 기록  
5. 3~4단계를 여러 번 반복한 후, 얼마나 자주 유의미한 차이가 발견되는지 알아봄. 이 확률이 검정력의 추정치임  
   
<br>  

***  

## 🎰 11.01. 표본크기  

🎲 검정력 계산의 주 용도는 표본크기가 어느 정도 필요한가를 추정하는 것임  

🎲 만약 큰 차이에만 관심이 있다면 상대적으로 적은 수의 표본으로도 목표를 이룰 수 있으나, 작은 차이에도 관심이 있다면 더 큰 표본이 필요함  

🎲 즉 기존의 방법과 새로운 처리 간의 효과크기의 차이를 바탕으로 표본의 크기를 결정함  

🎲 또한 효과크기의 차이를 기준으로 그 효과를 알아내고, 기존 방법을 쓸지 혹은 새로운 처리를 사용할지를 결정함  

<br>  

🎲 예시  

<br>  


📌 현재 클릭률이 1.1% 수준인데 여기서 10% 증가한 1.21%를 원한다고 가정하면,  

- 1.1% 의 1이 들어 있는 상자 A (110개의 1과 9,890개의 0)와  
   
- 1.21% 의 1이 들어 있는 상자 B (121개의 1과 9,879개의 0)가 있다고 생각할 수 있음  
   
1. 이때 각 상자에서 300개씩 뽑는다고 할때, 그 결과에 대해 어떤 가설검정을 한다 해도 유의미할 가능성은 굉장히 낮음.  

- 전체 표본의 크기에 비해 추출한 표본의 개수가 너무나 작고, 효과크기는 10% 차이로 표본 크기가 적합하지 않음  
   
<br>  

2. 따라서 표본의 크기를 증가시켜 2000개를 뽑고, 효과 크기 또한 50% 증가한 1.65% 를 원한다고 가정하면,   
   
- 1.1% 의 1이 들어 있는 상자 A (110개의 1과 9,890개의 0)와  
   
- 1.65%의 1이 들어 있는 상자 B(165개의 1과 9,835개의 0)가 있다고 생각할 수 있음  
   
- 각 상자에서 2000개씩 뽑은 결과가 (상자 A : 19개의 1 / 상자 B : 34개의 1) 인 경우 유의성검정을 수행해도 유의미하지 않을 가능성이 큼  
  
- 따라서 검정력을 계산하기 위해서는 이러한 과정을 여러번 반복해야 함  
   
<br>  

***  

🎲 요약하면, 검정력 혹은 필요한 표본크기의 계산과 관련한 다음 4가지 요소들이 존재함  

- 표본크기  
   
- 효과크기  
   
- 유의수준  
   
- 검정력  
 
🎲 이 중 3가지를 정하면 나머지 하나를 알 수 있고, 일반적으로 표본크기를 알고 싶은 경우가 많음.  

🎲 통계 검정 수행에 앞서 어느 정도의 표본 크기가 필요할지 미리 생각할 필요가 있음  

🎲 알아내고자 하는 효과크기의 최소 크기를 지정해야 함  

🎲 또한 효과크기를 알아내기 위해 검정력을 지정해야 함  

🎲 이에 더해, 수행할 가설검정에 필요한 유의수준을 정해야 함  

<br>  

***  
