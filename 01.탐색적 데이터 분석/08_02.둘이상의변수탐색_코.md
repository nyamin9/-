# 🎰 08_02. 상관관계분석_코드  

## 🎰 08.01. R 코드  

🎲 Hexagonal Plot :   
`ggplot(data, (aes(x, y)))+stat_bin_hex(color)+theme_bw()+scale_fill_gradient(low, high)+labs(x, y)`  
  
```r
kc_tax <- read.csv('kc_tax.csv')
library(ggplot2)

# 데이터에서 필요없는 부분 제거
kc_tax0 <- subset(kc_tax, TaxAssessedValue < 750000 &
                  SqFtTotLiving > 100 &
                  SqFtTotLiving < 3500)

# hex_bin
ggplot(kc_tax0, (aes(x=SqFtTotLiving, y=TaxAssessedValue))) + 
  stat_bin_hex(color = 'white') + 
  theme_bw() + 
  scale_fill_gradient(low = 'white', high = 'black') +
  labs(x = 'Finished Square Feet', y = 'Tax-Assessed Value')
```  

<p align="center"><img src="https://user-images.githubusercontent.com/65170165/211229989-9f19f965-43a9-4584-bd5f-459a66252c49.png" width="400" /></p><br>  

- 제대로 출력되지 않는다. 코드를 수정해서 다시 실행해봐야겠다.  
   
<br>  
 
🎲 Contour plot :  
`ggplot(data, aes(column1, column2))+theme_bw()+geom_point(alpha)+geom_density2d(color)+labs(x, y)`  

```r
ggplot(kc_tax0, aes(SqFtTotLiving, TaxAssessedValue)) + 
  theme_bw() + 
  geom_point(alpha = 0.1) + 
  geom_density2d(color = 'white') + 
  labs(x = 'Finished Square Feet', y = 'Tax-Assessed Value')
```  

<p align="center"><img src="https://user-images.githubusercontent.com/65170165/211203104-5ed5793a-e8eb-444b-9ee7-cd98298409ce.png" width="400" /></p><br>  

🎲 분할표 : `CrossTable(data$column1, data$column2, prop.c, prop.chisq, prop.t)`  

```r
library(descr)

x_tab <- CrossTable(lc_loans$grade, lc_loans$status,
                    prop.c = FALSE, prop.chisq = FALSE, prop.t = FALSE)
x_tab
```
```
======================================================================
                  lc_loans$status
lc_loans$grade    Charged Off   Current   Fully Paid     Late    Total
----------------------------------------------------------------------
A                        1562     50051        20408      469    72490
                        0.022     0.690        0.282    0.006    0.161
----------------------------------------------------------------------
B                        5302     93852        31160     2056   132370
                        0.040     0.709        0.235    0.016    0.294
----------------------------------------------------------------------
C                        6023     88928        23147     2777   120875
                        0.050     0.736        0.191    0.023    0.268
----------------------------------------------------------------------
D                        5007     53281        13681     2308    74277
                        0.067     0.717        0.184    0.031    0.165
----------------------------------------------------------------------
E                        2842     24639         5949     1374    34804
                        0.082     0.708        0.171    0.039    0.077
----------------------------------------------------------------------
F                        1526      8444         2328      606    12904
                        0.118     0.654        0.180    0.047    0.029
----------------------------------------------------------------------
G                         409      1990          643      199     3241
                        0.126     0.614        0.198    0.061    0.007
----------------------------------------------------------------------
Total                   22671    321185        97316     9789   450961
======================================================================
```  

<br>  

🎲 Box plot : `boxplot(column1 ~ column2, data = data, ylim = c(0,50))`  

```r
# Box plot
airline_stats <- read.csv('airline_stats.csv')
boxplot(pct_carrier_delay ~ airline, data = airline_stats, ylim = c(0,50))
```  
<p align="center"><img src="https://user-images.githubusercontent.com/65170165/211204352-08b48978-9ca2-49ae-ab55-b5c689646ffd.png" width="400" /></p><br>  

🎲 Violin plot :   
`ggplot(data = data, aes(column1, column2))+ylim(0,50)+geom_violin()+labs(x, y)`  

```r
ggplot(data = airline_stats, aes(airline, pct_carrier_delay)) +
  ylim(0,50) +
  geom_violin() + 
  labs(x = '', y = 'Daily % of Delayed Flights')
```  

<p align="center"><img src="https://user-images.githubusercontent.com/65170165/211204831-57a84204-ff57-4426-8753-caeabc2044cb.png" width="400" /></p><br>  

🎲 다변수 시각화 :  
`ggplot(subset(data, column1 %in% c(sub_column1)), aes(x, y))+`  
`stat_binhex(color)+theme_bw()+scale_fill_gradient(low, high)+`  
`labs(x, y)+facet_wrap('column1')`  

```r
# 1.8.4. 다변수 시각화

ggplot(subset(kc_tax0, ZipCode %in% c(98188, 98105, 98108, 98126)),
       aes(x=SqFtTotLiving, y = TaxAssessedValue)) +
  stat_binhex(color = 'white') +
  theme_bw() +
  scale_fill_gradient(low = 'white', high = 'blue') +
  labs(x = 'Finished Square Feet', y = 'Tax-Assessed Value') +
  facet_wrap('ZipCode')
```  
<p align="center"><img src="https://user-images.githubusercontent.com/65170165/211233288-7559c486-bada-4eae-bea8-ca69467467bd.png" width="550" /></p><br>  






