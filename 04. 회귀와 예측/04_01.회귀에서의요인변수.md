# 🎰 04_01. 회귀에서의 요인변수  

🎲 요인변수 (factor variable) : 개수가 제한된 이산값을 취하는 변수 (범주형 변수)  

🎲 지표변수 (indicator variable) : 예 / 아니오 의 값만을 가지는 변수 (이진변수)  

🎲 회귀분석에는 수치 입력이 필요하기 때문에, 모델에 사용할 수 있도록 요인변수를 다시 수치화해야 함  

🎲 이를 위한 방법은 변수를 이진 가변수들의 집합으로 변환하는 것  

<br>  

🎲 용어 정리  

- 가변수 (dummy variable) : 회귀나 다른 모델에서 요인 변수를 사용하기 위해 0과 1의 이진변수로 변환한 변수  
   
- 기준 부호화 (reference coding) : 한 요인을 기준으로 하고 다른 요인들을 이 기준에 따라 비교할 수 있게 설정한 부호화 방법  
   
- 원-핫 인코딩 (one-hot encoding) : 머신러닝 분야에서 사용되는 부호화. 모든 요인 수준이 계속 유지됨. 다중선형회귀에는 적합하지 않음  
   
- 편차 부호화 (deviation coding) : 기준 수준과는 반대로 전체 평균에 대한 각 수준을 비교하는 부호화 방법  
   
<br>  
 
***  

## 🎰 01. 가변수 표현  

🎲 회귀를 위해서 요인변수를 수치형 변수로 변환하는 것  

- 요인변수에서 각각의 가능한 값을 이진변수로 변환함  
   
- 만약 PropertyType 변수의 가능한 값이 Multiplex, Single Family, Townhouse 세 가지라면, 변수 변환은 아래와 같음  
   
```  

    PropertyTypeMultiplex   PropertyTypeSingle Family   PropertyTypeTownhouse
    
1                       1                           0                       0
2                       0                           1                       0
3                       0                           1                       0
4                       0                           1                       0
5                       0                           1                       0
6                       0                           0                       1

```  
<br>  


🎲 요인변수를 P 개의 개별 값으로 인코딩하기 위한 가장 좋은 방법은 P-1 개의 가변수를 만들어 사용하는 것  

- P 개의 개별 값 인코을 위해 P-1 개의 가변수 열을 만들면 나머지 값이 0일때 남은 하나의 값은 알아서 정해짐  
 

- 회귀 모형에는 일반적으로 절편이 포함됨  
   
- 절편이 있기에 P-1개의 이진변수의 값을 정의하고 나면 P번째 값을 알 수 있음  
   
- 따라서 P번째 값까지 모델에 넣게 되면 이러한 중복성으로 인한 다중공선성 오류가 발생할 수 있음  
   
<br>  

🎲 기준 부호화에 의해서 기준 요인의 계수는 나머지 기준이 0일때 자동으로 정해짐.  

- 따라서 회귀분석의 결과 회귀계수가 따로 설정되지 않음  
   
<br>  

***  

## 🎰 02. 다수의 수준을 갖는 요인변수  

🎲 어떤 요인변수는 가능한 수준의 수가 많기에 많은 양의 이진 더미를 생성 할 수 있음  

🎲 이러한 경우 예측변수와 결과의 관계를 탐색해 유용한 정보가 범주에 포함되는지 여부를 판단하는 것이 유용  

🎲 따라서 모든 요소를 유지하는 것이 좋을지 아니면 수준을 통합하는 것이 나을지를 결정해야 함  

🎲 다수의 수준을 갖는 요인변수의 경우 더 적은 수준을 갖는 변수가 되도록 수준들을 통합하는 것이 일반적임  


<br>  

🚩 우편번호와 집값 간의 관계를 예로 들자면,  

우편번호는 집값에 대한 위치의 효과를 볼 수 있는 변수임. 하지만 우편번호의 종류는 다양하며, 그 중 몇몇의 경우는 매물의 수가 적을 가능성이 높음. 따라서 우편번호 변수의 경우 그 수준을 고려하면 그대로 사용하기 보다는 그룹짓는 것이 모델의 형성과 분석에 유용함. 다섯자리의 우편번호에서 앞 두세자리로 통합하려고 해도 좁은 지역에서 얻은 데이터일 경우 그 우편번호가 유사할 것이기 때문에 이 기준으로 그룹을 만드는 것은 적합하지 않음.  

따라서 이에 대한 대안으로 다른 변수에 따라 우편번호를 그룹화하는 방법이 있음. 예를 들어 집값을 기준으로 우편번호를 그룹화하면 보다 나음 회귀를 진행이 가능함. 또는 처음에 만들었던 초기 모델의 잔차를 사용하여 우편번호의 그룹을 만드는 것도 좋음.  

-> 우편번호를 초기 회귀모델의 잔차값의 중간값을 기준으로 그룹화하는 방법  

⭐ 회귀 적합을 돕기 위해서 잔차를 사용한다는 개념은 모델링 과정에 있어 매우 중요한 기본 단계임  

<br>  

***  

## 🎰 03. 순서가 있는 요인변수  

🎲 순서요인변수(ordered factor variable) / 순서범주형변수(ordered categorical variable) : 요인의 수준이 순서를 가지는 요인변수  

🎲 순서 요인변수는 일반적으로 숫자 값으로 변환하여 그대로 사용  

🎲 등급을 매기는 상황을 가정했을 때, 등급은 의미를 가지는 반면 수치형 변수는 이를 내림차순으로 정렬할 수 있음  

🎲 순서 요인변수를 수치형 변수로 다룸으로써 그냥 요인변수로 다루면 잃어버릴 수 있는 순서에 담긴 정보를 유지함  

<br>  

***  
